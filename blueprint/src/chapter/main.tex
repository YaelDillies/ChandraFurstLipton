% This is the main point of entry to the blueprint.
% Add chapters of the blueprint here.
% This file is not meant to be built. Build src/web.tex or src/print.tex instead.

Let $G$ be a finite abelian group whose size we will denote $d$. Let $d \ge 2$ a natural number.

\begin{definition}[$Eval$ function]
  \label{def:eval}
  \uses{}
  % \lean{}
  % \leanok

  The $\Eval$ function is defined as
  \begin{align}
      \Eval : G^d & \to \Bool \\
      x & \mapsto \begin{cases}
      1 & \text{ if } \sum_i x_i = 0 \\
      0 & \text{ else}
    \end{cases}
  \end{align}
\end{definition}

\begin{definition}[Forgetting a coordinate]
  \label{def:forget}
  % \lean{}
  % \leanok

  For an index $i : [d]$, we define
  \begin{align}
    \forget_i : G^d & \to G^\{j : [d] \mid j \ne i\} \\
    x & \mapsto j \mapsto x_j
  \end{align}
\end{definition}

\begin{definition}[NOF strategy]
  \label{def:strategy}
  \uses{}
  % \lean{}
  % \leanok

  A {\bf NOF strategy} consists of maps
  \begin{align}
    \strat : & [d] \to G^{d - 1} \to \List \Bool \to \Bool \\
    \guess : & [d] \to G^{d - 1} \to \List \Bool \to G
  \end{align}
\end{definition}

\begin{definition}[NOF broadcast]
  \label{def:broadcast}
  \uses{def:strategy, def:forget}
  % \lean{}
  % \leanok

  Given a NOF strategy, the NOF broadcast on input $x : G^d$ is inductively defined by
  \begin{align}
    \broad(x) : \N & \to \List \Bool \\
    0 & \mapsto [] \\
    t + 1 & \mapsto \strat_{t \% d}(\forget_{\{t \% d\}^c}(x)) :: \broad(x) t
  \end{align}
\end{definition}

\begin{definition}[Valid NOF strategy]
  \label{def:valid-strategy}
  \uses{def:broadcast}
  % \lean{}
  % \leanok

  Given a function $F : G^d \to G$, the NOF strategy is {\bf valid for $F$ at time $t$ on input $x$} if
  $$\guess_i(\forget_i(x), \broad(x), t) = F(x)$$
\end{definition}

\begin{lemma}[All strategies are eventually valid]
  \label{lem:eventually-valid-strategy}
  \uses{def:valid-strategy}
  % \lean{}
  % \leanok

  All $F$-NOF strategies are valid in time $d\ceil{\log_2 d}$.
\end{lemma}
\begin{proof}
  % \leanok

  Make the strategies be "Send the $t / d$-th bit of the number of the neighbor on my right". Then make the guess "Compute $x$ from its binary representation, then compute $F(X)$".
\end{proof}
